<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>BAMLSS Prediction — predict.bamlss • bamlss</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="BAMLSS Prediction — predict.bamlss" />

<meta property="og:description" content="Takes a fitted bamlss object and computes predictions. Predictions can be based on
  estimated parameters of optimizer functions or on samples returned from sampler functions.
  It is possible to compute predictions on multiple cores using the
  parallel and to chunk predictions to save computation time and memory
  storage. Predictions can be computed for full distributional parameters or specific model
  terms. If a link{bamlss} model was fitted on multiple cores, i.e., the samples
  are provided as link{mcmc.list} where each list entry represents samples from one
  core, function predict.bamlss() computes combined predictions based on samples of all
  cores." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bamlss</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bamlss.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/distregvis.html">Visualization with distreg.vis</a>
    </li>
    <li>
      <a href="../articles/families.html">BAMLSS Families</a>
    </li>
    <li>
      <a href="../articles/glm.html">Generalized Linear Models (+)</a>
    </li>
    <li>
      <a href="../articles/misc.html">Miscellaneous Topics</a>
    </li>
    <li>
      <a href="../articles/terms.html">Available Model Terms</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>BAMLSS Prediction</h1>
    
    <div class="hidden name"><code>predict.bamlss.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Takes a fitted <code><a href='bamlss.html'>bamlss</a></code> object and computes predictions. Predictions can be based on
  estimated parameters of optimizer functions or on samples returned from sampler functions.
  It is possible to compute predictions on multiple cores using the
  <code><a href='https://www.rdocumentation.org/packages/parallel/topics/parallel-package'>parallel</a></code> and to chunk predictions to save computation time and memory
  storage. Predictions can be computed for full distributional parameters or specific model
  terms. If a <code>link{bamlss}</code> model was fitted on multiple cores, i.e., the samples
  are provided as <code>link{mcmc.list}</code> where each list entry represents samples from one
  core, function <code>predict.bamlss()</code> computes combined predictions based on samples of all
  cores.</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for bamlss</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>object</span>, <span class='no'>newdata</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>match.names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"link"</span>, <span class='st'>"parameter"</span>),
  <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) { <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/mean'>mean</a></span>(<span class='no'>x</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) }, <span class='kw'>trans</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>what</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"samples"</span>, <span class='st'>"parameters"</span>), <span class='kw'>nsamps</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>drop</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>cores</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>chunks</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code>"bamlss"</code></p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>A data frame or list containing the values of the model
    covariates at which predictions are required. Note that depending
    on argument <code>term</code>, only covariates that are needed by the
    corresponding model terms need to be supplied.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>Character or integer, specifies the model for which predictions should be computed.</p></td>
    </tr>
    <tr>
      <th>term</th>
      <td><p>Character or integer, specifies the model terms for which predictions are required.
    Note that, e.g., <code>term = c("s(x1)", "x2")</code> will compute the combined prediction
    <code>s(x1) + x2</code>.</p></td>
    </tr>
    <tr>
      <th>match.names</th>
      <td><p>Should partial string matching be used to select the <code>term</code>s for
    prediction. Note that, e.g., <code>term = "x1"</code> will select all terms including <code>"x1"</code> if
    <code>match.names = TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>intercept</th>
      <td><p>Should the intercept be included?</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>If <code>type = "link"</code> the predictor of the corresponding <code>model</code>
    is returned. If <code>type = "parameter"</code> predictions on the distributional parameter scale
    are returned.</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>A function that should be applied on the samples of predictors or
    parameters, depending on argument <code>type</code>.</p></td>
    </tr>
    <tr>
      <th>trans</th>
      <td><p>A transformer function or named list of transformer functions that computes
    transformed predictions. If <code>trans</code> is a list, the list names must match the names
    of the parameters of the <code><a href='family.bamlss.html'>bamlss.family</a></code>.</p></td>
    </tr>
    <tr>
      <th>what</th>
      <td><p>Predictions can be computed from samples or estimated parameters of optimizer
    functions. If no samples are available the default is to use estimated parameters.</p></td>
    </tr>
    <tr>
      <th>nsamps</th>
      <td><p>If the fitted <code><a href='bamlss.html'>bamlss</a></code> object contains samples of parameters,
    computing predictions may take quite some time. Therefore, to get a first feeling it can
    be useful to compute predictions only based on <code>nsamps</code> samples, i.e., <code>nsamps</code>
    specifies the number of samples which are extracted on equidistant intervals.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>If predictions are chunked, information on the prediction process can be printed.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>If predictions for only one <code>model</code> are returned, the list structure is dropped.</p></td>
    </tr>
    <tr>
      <th>cores</th>
      <td><p>Specifies the number of cores that should be used for prediction. Note that
    this functionality is based on the <code><a href='https://www.rdocumentation.org/packages/parallel/topics/parallel-package'>parallel</a></code> package.</p></td>
    </tr>
    <tr>
      <th>chunks</th>
      <td><p>Should computations be split into <code>chunks</code>? Prediction is then processed
    sequentially.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>Arguments passed to prediction functions that are part of a <code><a href='family.bamlss.html'>bamlss.family</a></code>
    object, i.e., the objects has a <code>$predict()</code> function that should be used instead.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Depending on arguments <code>model</code>, <code>FUN</code> and the structure of the <code><a href='bamlss.html'>bamlss</a></code>
  model, a list of predictions or simple vectors or matrices of predictions.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>link{bamlss}</code>, <code><a href='fitted.bamlss.html'>fitted.bamlss</a></code>.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'>## Generate some data.</span>
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='GAMart.html'>GAMart</a></span>()

<span class='co'>## Model formula.</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(
  <span class='no'>num</span> ~ <span class='fu'>s</span>(<span class='no'>x1</span>) + <span class='fu'>s</span>(<span class='no'>x2</span>) + <span class='fu'>s</span>(<span class='no'>x3</span>) + <span class='fu'>te</span>(<span class='no'>lon</span>,<span class='no'>lat</span>),
  <span class='no'>sigma</span> ~ <span class='fu'>s</span>(<span class='no'>x1</span>) + <span class='fu'>s</span>(<span class='no'>x2</span>) + <span class='fu'>s</span>(<span class='no'>x3</span>) + <span class='fu'>te</span>(<span class='no'>lon</span>,<span class='no'>lat</span>)
)

<span class='co'>## Estimate model.</span>
<span class='no'>b</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='bamlss.html'>bamlss</a></span>(<span class='no'>f</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>d</span>)

<span class='co'>## Predictions.</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/str'>str</a></span>(<span class='no'>b</span>)

<span class='co'>## Prediction for "mu" model and term "s(x2)".</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='st'>"mu"</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='st'>"s(x2)"</span>)

<span class='co'>## Plot effect</span>
<span class='fu'><a href='plot2d.html'>plot2d</a></span>(<span class='no'>p</span> ~ <span class='no'>x2</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>d</span>)

<span class='co'>## Same for "sigma" model.</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='st'>"sigma"</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='st'>"s(x2)"</span>)
<span class='fu'><a href='plot2d.html'>plot2d</a></span>(<span class='no'>p</span> ~ <span class='no'>x2</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>d</span>)

<span class='co'>## Prediction for "mu" model and term "s(x1)" + "s(x2)"</span>
<span class='co'>## without intercept.</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='st'>"mu"</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"s(x1)"</span>, <span class='st'>"s(x2)"</span>),
  <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'>## Prediction based on quantiles.</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='st'>"mu"</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='st'>"s(x2)"</span>, <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>c95</span>)
<span class='fu'><a href='plot2d.html'>plot2d</a></span>(<span class='no'>p</span> ~ <span class='no'>x2</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>d</span>)

<span class='co'>## Extract samples of predictor for "s(x2)".</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='st'>"mu"</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='st'>"s(x2)"</span>,
  <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) { <span class='no'>x</span> })
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/dim'>dim</a></span>(<span class='no'>p</span>))
<span class='fu'><a href='plot2d.html'>plot2d</a></span>(<span class='no'>p</span> ~ <span class='no'>x2</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>d</span>, <span class='kw'>col.lines</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/grDevices/topics/rgb'>rgb</a></span>(<span class='fl'>0.1</span>, <span class='fl'>0.1</span>, <span class='fl'>0.1</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.1</span>))

<span class='co'>## Or using specific combinations of terms.</span>
<span class='no'>p</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>, <span class='kw'>model</span> <span class='kw'>=</span> <span class='st'>"mu"</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"s(x2)"</span>, <span class='st'>"te(lon,lat)"</span>),
  <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) { <span class='no'>x</span> })
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>p</span>)

<span class='co'>## Prediction using new data.</span>
<span class='co'>## Only need x3 data when predicting</span>
<span class='co'>## for s(x3).</span>
<span class='no'>nd</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='st'>"x3"</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq</a></span>(<span class='fl'>0</span>, <span class='fl'>1</span>, <span class='kw'>length</span> <span class='kw'>=</span> <span class='fl'>100</span>))
<span class='no'>nd</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/cbind'>cbind</a></span>(<span class='no'>nd</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/predict'>predict</a></span>(<span class='no'>b</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>nd</span>, <span class='kw'>term</span> <span class='kw'>=</span> <span class='st'>"s(x3)"</span>))
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>nd</span>))
<span class='fu'><a href='plot2d.html'>plot2d</a></span>(<span class='no'>mu</span> ~ <span class='no'>x3</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>nd</span>)
<span class='fu'><a href='plot2d.html'>plot2d</a></span>(<span class='no'>sigma</span> ~ <span class='no'>x3</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>nd</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Nikolaus Umlauf, Nadja Klein, Achim Zeileis, Thorsten Simon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

